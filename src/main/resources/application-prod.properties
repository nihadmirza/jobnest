# Production profile (set env: SPRING_PROFILES_ACTIVE=prod)

# Database (required in prod)
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Render/containers often provide PORT env var
server.port=${PORT:8080}

# First deploy convenience: allow Hibernate to create/update schema.
# Recommended next step: switch to Flyway/Liquibase + ddl-auto=validate.
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# Thymeleaf
spring.thymeleaf.cache=true

# Ensure seed data runs after schema is ready (data.sql uses Postgres ON CONFLICT)
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true

# Reverse proxy / TLS
server.forward-headers-strategy=framework
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=lax

# Ensure admin auto-create stays off unless explicitly enabled
app.admin.auto-create=${APP_ADMIN_AUTO_CREATE:false}

